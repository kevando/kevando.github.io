<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>8th Wall Web: three.js</title>
    <link rel="stylesheet" type="text/css" href="index.css" />

    <!-- THREE.js must be supplied -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/three.js/106/three.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r16/Stats.min.js"></script>

    <!-- Required to load glTF (.gltf or .glb) models -->
    <script src="//cdn.rawgit.com/mrdoob/three.js/r106/examples/js/loaders/GLTFLoader.js"></script>

    <!-- Javascript tweening engine -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>

    <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/xrextras -->
    <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>

    <!-- 8thWall Web - Replace the app key here with your own app key -->
    <script
      async
      src="//apps.8thwall.com/xrweb?appKey=yMXfdT32K4S7Br82ixuPubRABeFd2h3py1MFzB2OGWxjXWwQxCRhQsLVYnUBQpXxeOmG33"
    ></script>

    <!-- client code -->
  </head>

  <body>
    <video id="video" autoplay loop webkit-playsinline crossorigin="anonymous">
      <source
        src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/39255/spaceships.mp4?t=1"
        type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'
      />
    </video>
    <!-- <div id="demo-wrapper">
      <div id="container"></div>
      <p class="editable-text text-front" contenteditable="true">
        the video is an MP4, but it's transparent thanks to WebGL
      </p>
      <p class="editable-text text-behind" contenteditable="true">
        <strong>Update:</strong> Autoplay no longer works; click "play" in the
        bar below
      </p>
    </div>
    <div id="info">
      Transparent Video GLSL shader - with
      <a href="https://threejs.org" target="_blank">three.js</a>
    </div>
    <div id="controls">
      <label for="resolution">resolution: </label>
      <select id="resolution" value="2">
        <option value="0.5">0.5x</option>
        <option value="1" selected>1x</option>
        <option value="2">2x</option>
        <option value="4">4x</option>
        <option value="8">8x</option>
      </select>
      <label for="play-button">video controls: </label>
      <button id="play-button">Play</button>
      <button id="stop-button">Stop</button>
    </div> -->

    <script id="vertexShader" type="x-shader/x-vertex">
      varying vec2 vUv;
      void main()
      {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    </script>
    <script id="fragmentShader" type="x-shader/x-fragment">
      #ifdef GL_ES
      precision highp float;
      #endif

      uniform float time;
      uniform sampler2D texture;
      varying vec2 vUv;

      void main( void ) {
        gl_FragColor = vec4(
          texture2D(texture, vec2(vUv.x, 0.5 + vUv.y/2.)).rgb,
          texture2D(texture, vec2(vUv.x, vUv.y/2.)).r
        );
      }
    </script>

    <script>
      function log(text) {
        document.getElementById("logger").innerText = text;
      }

  //     document.getElementById("hide-camera-button").addEventListener("click", e => {
  //   document.getElementById("camerafeed").style.display = "none"
  // });
    </script>



    <canvas id="camerafeed"></canvas>
    <p id="logger"></p>


        <!-- <script src="glb.js"></script> -->
        <!-- <script src="mp4.js"></script> -->

        <p id="version">v4</p>
        <script src="combo.js?well=v4"></script>
  </body>
</html>
